{% extends 'base.html' %}

{% block title %}
    E-Farmer | Checkout
{% endblock %}

{% block content %}
    <div class="container">
        {% if not user.is_authenticated %}
            <h1 class="font-weight-light my-2 text-underline text-danger">You must login first!</h1> <hr>
            <div class="d-flex flex-row">
                <a class="btn btn-danger rounded-0 mr-2" href="{% url 'login_page' %}?next=/cart/">Login</a>
                <a class="btn btn-danger rounded-0" href="{% url 'register_page' %}?next=/cart/">Register</a>
            </div>
        {% else %}
            <form action="" method="POST">
            <h1 class="mt-3">My Addresses</h1>
            {% if addresses %}
                <p><i>Select Shipping Address</i></p>
                {% for address in addresses %}
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="address_id" id="exampleRadios1" value="{{ address.id }}">
                      <label class="form-check-label" for="exampleRadios1">
                        <p>
                        {{ address.full_name }}, <br> {{ address.address_line_1 }}, <br>
                        {% if address.address_line_2 %}{{ address.address_line_2 }}, <br>{% endif %}
                        {{ address.city }},<br> {{ address.state }} - {{ address.postal_code }}, <br> {{ address.country }}.<br>
                        </p><br>
                      </label>
                    </div>
                {% endfor %}
                <h4>Or..</h4>
                <a class="btn btn-info text-light" href="{% url 'carts:checkout_address_create' %}">Create New Address</a>
            {% else %}
                <h3>You have no saved address.</h3><br>
                <a class="btn btn-info text-light" href="{% url 'carts:checkout_address_create' %}">Create New Address</a>
            {% endif %}


                <h1 class="mt-3">Order Summary</h1>
                <p>Cart Total: {{ object.cart.total }}</p>
                <p>Shipping Total: {{ object.shipping_total }}</p>
                <p>Order Total: {{ object.order_total }}</p>
                <hr>
            </form>

        {% endif %}
    </div>
{% endblock %}
